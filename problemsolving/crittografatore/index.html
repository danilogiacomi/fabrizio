<!DOCTYPE html>

<html>

<!--

Vedi https://getbootstrap.com/docs/4.4/getting-started/introduction/

-->

    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <title> Crittografatore</title>
        <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, “Segoe UI”, Roboto, “Helvetica Neue”, Arial, sans-serif, “Apple Color Emoji”, “Segoe UI Emoji”, “Segoe UI Symbol”;
            /* default is 1rem or 16px */
            font-size: 20px;
            font-weight: 400;
            line-height: 1.5;
        }
        </style>
        <link rel="icon" href="pack.png" style="width:100%;">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    </head>

    <body>
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="/">
                <img src="pack.png" alt="Torna alla homepage" style="width: 40px; height: 40px;" style="width:100%;">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="http://fabrizio.rf.gd" id="dropdown04" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Strumenti Problem Solving</a>
                                <div class="dropdown-menu" aria-labelledby="dropdown04">
                                <a class="dropdown-item" href="http://fabrizio.rf.gd/problemsolving/crittografatore">
                                    Crittografatore
                                </a>
                                <a class="dropdown-item" href="http://fabrizio.rf.gd/problemsolving/robot">
                                    Calcolatore percorso robot
                                </a>
                            </div>
                        </li>
                    </ul>
                </ul>
            <div class="collapse navbar-collapse" id="navbarsExample04">
                
            <!--Barra "cerca"
                <form class="form-inline mt-2 mt-md-0">
                <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
              </form>-->
            </div>
        </nav>
        <br>
        <br>
        <br>
        <div class="container">

            <div class="row">
                <div class="col-12">
                    <h2>Crittografatore</h2>
                    <h4>Inserire una parola per volta, senza spazi ne' caratteri speciali.</h4>
                </div>
            </div>
            <div class="row">   
                <div class="col-12">
                    <label for="testo">Testo</label>
                    <input type="text" name="testo" id="testo" placeholder="Scrivi il testo da convertire"/>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <label for="chiave">Chiave</label>  
                    <input type="text" name="chiave" placeholder="Intero, come 13" id="chiave"/>
                </div>
            </div> 
            <div class="row">
                <div class="col-12">
                 <label for="direzione">Direzione</label>
                    <select id="direzione">
                            <option value="left">Sx</option>
                            <option value="right">Dx</option>
                    </select>
                </div> 
            </div>
                
            <div class="row">
                <div class="col-12">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit" value="Cripta" onclick="vai('direct')">Cripta</button>
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit" value="Decripta" onclick="vai('inverse')">Decripta</button>
                </div> 
            </div>        

            <div class="row">
                <div class="col-12" id="alfabeto">
                </div>        
            </div>        
                
            <div class="row">
                <div class="col-12" id="alfabeto-criptato">
                </div>
            </div> 

            <div class="row">
                <div class="col-12">
                        Risultato: 
                </div>
                <div class="col-12" id="risultato">
                </div>
            </div> 
            <footer class="pt-4 my-md-5 pt-md-5 border-top">
                <div class="row">
                    <div class="col-12 col-md">
                        <img class="mb-2" src="pack.png" alt="" width="24" height="24">
                        <small class="d-block mb-3 text-muted">&copy; &reg; 2018-2019</small>
                    </div>
                    <div class="col-6 col-md">
                        <h5>Prodotti</h5>
                        <ul class="list-unstyled text-small">
                            <li><a class="text-muted" href="http://fabrizio.rf.gd/problemsolving/robot">Calcolo del percorso del robot</a></li>
                            <li><a class="text-muted" href="http://fabrizio.rf.gd/problemsolving/crittografatore">Crittografatore</a></li>
                        </ul>
                    </div>
                    <div class="col-6 col-md">
                        <h5>Strumenti</h5>
                        <ul class="list-unstyled text-small">
                            <li><a class="text-muted" href="https://www.olimpiadiproblemsolving.it/web/index.php" target="_blank">Sito olimpiadi Problem Solving</a></li>
                            <li><a class="text-muted" href="https://www.olimpiadi-italiano.it" target="_blank">Sito olimpiadi Italiano</a></li>
                        </ul>
                    </div>

                </div>
                <a class="btn btn-light btn-lg btn-block" href="#" role="button">Torna a inizio pagina</a>
            </footer>
        </div>        
        <script>
            function scriviAlfabeto(alfabeto, id){
                var table = "<table> <tr>";
                for (var i = 0; i < alfabeto.length; i++) {    
                l = alfabeto[i];
                table += "<td width='25px'>" + l + "</td>";
                }
                table += "</tr></table>";
                $("#" + id).html(table);

            }

            function rot (testo, direzione, chiave, alf){

                alf2=[] ;
                // se la chiave e' > alf.length facciamo il modulo
                chiave = chiave % alf.length;



            if (direzione == 'left') {
                for(i=parseInt(chiave); i<alf.length; i++){
                    alf2.push(alf[i]);
                }
                for(i=0; i<parseInt(chiave); i++){
                    alf2.push(alf[i]);
                }

            } else {
                for(i=parseInt(alf.length-chiave); i<alf.length; i++){
                    alf2.push(alf[i]);
                }
                for(i=0; i<parseInt(alf.length-chiave); i++){
                    alf2.push(alf[i]);
                }


            }

                return alf2;

            }


            function cripta(a1, a2, testo, verso="direct"){

            if (verso == "direct"){
                source = a1;
                dest = a2;
            } else {
                source = a2;
                dest = a1;   
            }


            testoCriptato = "";
                for (var i = 0; i < testo.length; i++) {    
                    l = testo.charAt(i).toUpperCase();
                    posizioneInAlf = source.indexOf(l);
                    testoCriptato += dest[posizioneInAlf];
                }

                return testoCriptato;
            }

            function vai(verso){

                alf=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
                testo = $("#testo").val();
                direzione = $("#direzione").val();
                chiave = $("#chiave").val();

                alf2 = rot (testo, direzione, chiave, alf);
                
            /**
            verso = "direct" | "inverse"
            */

                testoCriptato = cripta(alf, alf2, testo, verso);


                scriviAlfabeto(alf, "alfabeto");
                scriviAlfabeto(alf2, "alfabeto-criptato");

                $("#risultato").html(testoCriptato);
            }

            // alfabetoCriptato = "";
                // for(lettera in alf2){

                //     alfabetoCriptato += alf2[lettera] + " ";
                // }
                // $("#alfabeto-criptato").html(alfabetoCriptato);


            // per far riferimento a un id si usa il carattere # prima del nome
            // es:  #alfabeto
            //
            // per far riferimento a una classe si usa il carattere . prima del nome
            // es:  .risultato


        </script>      
    </body>
</html>